(this["webpackJsonpreact-main"]=this["webpackJsonpreact-main"]||[]).push([[12],{217:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(279),r=(n.a.arrayInsert,n.a.arrayMove,n.a.arrayPop,n.a.arrayPush,n.a.arrayRemove,n.a.arrayRemoveAll,n.a.arrayShift,n.a.arraySplice,n.a.arraySwap,n.a.arrayUnshift,n.a.autofill,n.a.blur,n.a.change,n.a.clearAsyncError,n.a.clearFields,n.a.clearSubmit,n.a.clearSubmitErrors,n.a.destroy,n.a.focus,n.a.initialize,n.a.registerField,n.a.reset);n.a.resetSection,n.a.setSubmitFailed,n.a.setSubmitSucceeded,n.a.startAsyncValidation,n.a.startSubmit,n.a.stopAsyncValidation,n.a.stopSubmit,n.a.submit,n.a.touch,n.a.unregisterField,n.a.untouch,n.a.updateSyncWarnings,n.a.updateSyncErrors},221:function(e,t,a){"use strict";function n(e,t){return e===t}function r(e,t,a){if(null===t||null===a||t.length!==a.length)return!1;for(var n=t.length,r=0;r<n;r++)if(!e(t[r],a[r]))return!1;return!0}function c(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var a=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+a+"]")}return t}a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var l=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var l=0,i=n.pop(),o=c(n),s=e.apply(void 0,[function(){return l++,i.apply(null,arguments)}].concat(a)),u=e((function(){for(var e=[],t=o.length,a=0;a<t;a++)e.push(o[a].apply(null,arguments));return s.apply(null,e)}));return u.resultFunc=i,u.dependencies=o,u.recomputations=function(){return l},u.resetRecomputations=function(){return l=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,a=null,c=null;return function(){return r(t,a,arguments)||(c=e.apply(null,arguments)),a=arguments,c}}));function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if("object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var a=Object.keys(e);return t(a.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t,n){return e[a[n]]=t,e}),{})}))}},224:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(221),r=Object(n.a)([e=>e.shopUser],e=>e.currentUser)},227:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"i",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"j",(function(){return f}));var n=a(221),r=e=>e.shopCart,c=Object(n.a)([r],e=>e.cartItems),l=Object(n.a)([c],e=>Object.values(e).reduce((e,{quantity:t})=>e+t,0)),i=Object(n.a)([r],e=>e.visibleDropdown),o=Object(n.a)([c],e=>Object.values(e).reduce((e,{quantity:t,price:a})=>e+t*a,0)),s=(a(224),e=>e.streams),u=Object(n.a)([s,(e,t)=>t],(e,t)=>e[t]),m=e=>e.auth,d=Object(n.a)([m],e=>e.isSignedIn),p=Object(n.a)([m],e=>e.userId),b=e=>e.users,h=Object(n.a)([b],e=>e.isLoadingUsers),f=Object(n.a)([b],e=>Object.values(e.users))},378:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a(44),i=a(43),o=a(4),s=a.n(o),u=a(9),m=a(33),d=a(78);class p extends n.Component{constructor(...e){var t;super(...e),t=this,this.authStatusChange=e=>{e?this.props.signIn(this.auth.currentUser.get().getId()):this.props.signOut()},this.signIn=function(){var e=Object(u.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,t.auth.signIn();case 4:n=e.sent,console.log("User signed in ",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("GoogleAuth signIn error ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.signOut=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,t.auth.signOut();case 4:console.log("User signed out."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("GoogleAuth signed out error ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}componentDidMount(){window.gapi&&window.gapi.load("client:auth2",()=>{window.gapi.client.init({clientId:"356527932784-volcn5md0nd1eg5nc2hn30cd6a6oeclf.apps.googleusercontent.com",scope:"email"}).then(()=>{this.auth=window.gapi.auth2.getAuthInstance(),this.auth.isSignedIn.listen(this.authStatusChange),this.authStatusChange(this.auth.isSignedIn.get())},()=>console.log("GoogleAuth gapi.client.init error"))})}render(){var e=this.props.isSignedIn;return null===e?"Auth is loading...":r.a.createElement(r.a.Fragment,null,e?r.a.createElement("a",{href:"/",onClick:this.signOut},"Sign out"):r.a.createElement("a",{href:"/",onClick:this.signIn},"Sign in"),r.a.createElement("div",null,"Google auth"))}}var b=Object(m.c)((e,t)=>({isSignedIn:e.auth.isSignedIn}),{signIn:d.a,signOut:d.b})(p),h=a(30),f=a(54),E=a(217),g=a(291),v=a(292);class O extends n.Component{constructor(...e){super(...e),this.onSubmit=e=>{this.props.onSubmit(e),this.props.dispatch(Object(E.a)("streamCreate"))},this.renderTextField=({input:e,meta:t,label:a,mandatory:n})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t.form+e.name},a,n&&r.a.createElement("sup",null,"*")),r.a.createElement("input",Object.assign({type:"text",autoComplete:"off",id:t.form+e.name},e)),r.a.createElement("p",{style:{color:"red"}},t.visited&&t.error)),this.renderMemoField=({input:e,meta:t,label:a,mandatory:n})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:t.form+e.name},a,n&&r.a.createElement("sup",null,"*")),r.a.createElement("textarea",Object.assign({id:t.form+e.name},e)),r.a.createElement("p",{style:{color:"red"}},t.touched&&t.error))}render(){var e=this.props,t=e.handleSubmit,a=e.valid;return r.a.createElement("form",{onSubmit:t(this.onSubmit)},r.a.createElement(g.a,{component:this.renderTextField,name:"title",label:"Enter title",mandatory:!0}),r.a.createElement(g.a,{component:this.renderMemoField,name:"description",label:"Enter description",mandatory:!1}),r.a.createElement("button",{type:"submit",disabled:!a},"Submit"))}}var j=Object(v.a)({form:"streamForm",validate:function(e){var t={};return e.title||(t.title="Please fill title"),t}})(O),y=Object(n.memo)(()=>{var e=Object(m.d)(),t=Object(n.useCallback)(t=>e(Object(f.b)(t)),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{onSubmit:t}),r.a.createElement("p",null,r.a.createElement(h.b,{to:"/stream"},"Go to stream list ->")))}),S=a(10),C=Object(n.memo)(({match:e})=>{var t=Object(m.d)(),a=Object(m.e)(t=>t.streams[e.params.id]);Object(n.useEffect)(()=>{var a=S.a.CancelToken.source();return t(Object(f.h)(e.params.id,a.token)),()=>{a.cancel("Cancel fetchStream ".concat(e.params.id))}},[t,e.params.id]);var c=Object(n.useCallback)(a=>t(Object(f.d)(e.params.id,a)),[t,e.params.id]);if(a){var l=a.title,i=a.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Edit stream"),r.a.createElement(j,{initialValues:{title:l,description:i},onSubmit:c}),r.a.createElement("p",null,r.a.createElement(h.b,{to:"/stream"},"Go to stream list ->")))}return r.a.createElement("div",null,"...Loading")}),w=a(227),k=Object(n.memo)(({match:e})=>{var t=Object(m.d)(),a=Object(m.e)(t=>Object(w.i)(t,e.params.id));return Object(n.useEffect)(()=>{t(Object(f.h)(e.params.id))},[t,e]),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Stream show"),r.a.createElement("p",null,"Stream title:",a.title),r.a.createElement("p",null,"Stream description:",a.description),r.a.createElement(h.b,{to:"/stream"},"Go to stream list")):r.a.createElement("div",null,"...Loading")}),F=a(34),I=({title:e,description:t})=>r.a.createElement("div",{className:"stream"},r.a.createElement("p",{className:"stream__title"},e),r.a.createElement("p",{className:"stream__description"},t)),x=Object(n.memo)(({stream:e,currentUserId:t,onDeleteClick:a})=>{var n=e.userId,c=e.id;if(n===t)return r.a.createElement("div",{className:"stream-list__controls"},r.a.createElement(h.b,{to:"/stream/edit/".concat(c)},"Edit"),r.a.createElement("button",{type:"button",onClick:a},"Delete"))}),A=a(40),_=a.n(A),N=(a(378),({title:e,controls:t})=>_.a.createPortal(r.a.createElement("div",{className:"modal-portal"},r.a.createElement("div",{className:"modal-portal__inner"},r.a.createElement("p",null,e),r.a.createElement("div",{className:"modal-portal__controls"},t))),document.querySelector("#modal"))),U=Object(n.memo)(()=>{var e=Object(m.d)(),t=Object(m.e)(w.h),a=Object(m.e)(w.b),c=Object(n.useState)(null),l=Object(F.a)(c,2),i=l[0],o=l[1],s=Object(n.useCallback)(e=>()=>{o(e)},[]),u=Object(n.useCallback)(()=>{e(Object(f.c)(i.id)),o(null)},[e,i]),d=Object(n.useCallback)(()=>{o(null)},[]),p=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:u},"Delete"),r.a.createElement("button",{type:"button",onClick:d},"Cancel"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"stream-list"},Object.entries(t).map(([e,t])=>r.a.createElement("li",{key:e,className:"stream-list__item"},r.a.createElement(I,Object.assign({},t,{title:r.a.createElement(h.b,{to:"/stream/".concat(t.id)},t.title)})),r.a.createElement(x,{stream:t,currentUserId:a,onDeleteClick:s(t)})))),i&&r.a.createElement(N,{title:"Are u sure u wanna delete this stream?",controls:p}))}),D=Object(n.memo)(()=>{var e=Object(m.d)(),t=Object(m.e)(w.a);return Object(n.useEffect)(()=>{e(Object(f.i)())},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),t&&r.a.createElement("p",null,r.a.createElement(h.b,{to:"/stream/create"},"Create stream ->")))});t.default=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Router examples"),r.a.createElement(b,null),r.a.createElement(i.a,{exact:!0,routes:[{to:"/stream",title:"StreamList"},{to:"/stream/create",title:"StreamCreate"}]}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/stream",exact:!0,component:D}),r.a.createElement(c.b,{path:"/stream/create",exact:!0,component:y}),r.a.createElement(c.b,{path:"/stream/edit/:id",exact:!0,component:C}),r.a.createElement(c.b,{path:"/stream/:id",exact:!0,component:k}),r.a.createElement(c.b,{path:"/stream/*"},r.a.createElement(l.a,null,"Stream not found"))))}}]);
//# sourceMappingURL=12.ca289e60.chunk.js.map