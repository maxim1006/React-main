(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{210:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(238),r=(a(1),n.a.arrayInsert,n.a.arrayMove,n.a.arrayPop,n.a.arrayPush,n.a.arrayRemove,n.a.arrayRemoveAll,n.a.arrayShift,n.a.arraySplice,n.a.arraySwap,n.a.arrayUnshift,n.a.autofill,n.a.blur,n.a.change,n.a.clearAsyncError,n.a.clearFields,n.a.clearSubmit,n.a.clearSubmitErrors,n.a.destroy,n.a.focus,n.a.initialize,n.a.registerField,n.a.reset);n.a.resetSection,n.a.setSubmitFailed,n.a.setSubmitSucceeded,n.a.startAsyncValidation,n.a.startSubmit,n.a.stopAsyncValidation,n.a.stopSubmit,n.a.submit,n.a.touch,n.a.unregisterField,n.a.untouch,n.a.updateSyncWarnings,n.a.updateSyncErrors},335:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(46),l=a(223),c=a(47),o=a(212),s=a(4),u=a(5),m=a(7),p=a(6),d=a(8),h=a(9),f=a(18),b=function(e){var t=e.title,a=e.description;return r.a.createElement("div",{className:"stream"},r.a.createElement("p",{className:"stream__title"},t),r.a.createElement("p",{className:"stream__description"},a))},E=a(37),v=a(28),g=a.n(v),S=(a(335),function(e){var t=e.title,a=e.controls;return g.a.createPortal(r.a.createElement("div",{className:"modal-portal"},r.a.createElement("div",{className:"modal-portal__inner"},r.a.createElement("p",null,t),r.a.createElement("div",{className:"modal-portal__controls"},a))),document.querySelector("#modal"))}),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={streamToDelete:null},a.onDelete=function(e,t){(0,a.props.deleteStream)(e.id),a.hideDeleteModel()},a.hideDeleteModel=function(){a.setState({streamToDelete:null})},a.showDeleteModal=function(e){a.setState({streamToDelete:e})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchStreams()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderStreamList(),this.renderCreateControls(),this.renderDeleteModal())}},{key:"renderStreamList",value:function(){var e=this,t=this.props.streams;return r.a.createElement("ul",{className:"stream-list"},Object.entries(t).map(function(t){var a=Object(o.a)(t,2),n=a[0],i=a[1];return r.a.createElement("li",{key:n,className:"stream-list__item"},r.a.createElement(b,Object.assign({},i,{title:r.a.createElement(E.a,{to:"/stream/".concat(i.id)},i.title)})),e.renderControls(i))}))}},{key:"renderControls",value:function(e){var t=this.props.currentUserId,a=e.userId,n=e.id;if(a===t)return r.a.createElement("div",{className:"stream-list__controls"},r.a.createElement(E.a,{to:"/stream/edit/".concat(n)},"Edit"),r.a.createElement("button",{type:"button",onClick:this.showDeleteModal.bind(this,e)},"Delete"))}},{key:"renderCreateControls",value:function(){if(this.props.auth)return r.a.createElement("p",null,r.a.createElement(E.a,{to:"/stream/create"},"Create stream ->"))}},{key:"renderDeleteModal",value:function(){var e=this.state.streamToDelete;if(e){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:this.onDelete.bind(this,e)},"Delete"),r.a.createElement("button",{type:"button",onClick:this.hideDeleteModel},"Cancel"));return r.a.createElement(S,{title:"Are u sure u wanna delete this stream?",controls:t})}}}]),t}(n.Component),O=Object(h.b)(function(e,t){return{streams:e.streams,currentUserId:e.auth.userId,auth:e.auth.isSignedIn}},{fetchStreams:f.i,deleteStream:f.c})(y),j=a(210),w=a(240),k=a(241),C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).onSubmit=function(e){a.props.onSubmit(e),a.props.dispatch(Object(j.a)("streamCreate"))},a.renderTextField=function(e){var t=e.input,a=e.meta,n=e.label,i=e.mandatory;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:a.form+t.name},n,i&&r.a.createElement("sup",null,"*")),r.a.createElement("input",Object.assign({type:"text",autoComplete:"off",id:a.form+t.name},t)),r.a.createElement("p",{style:{color:"red"}},a.visited&&a.error))},a.renderMemoField=function(e){var t=e.input,a=e.meta,n=e.label,i=e.mandatory;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:a.form+t.name},n,i&&r.a.createElement("sup",null,"*")),r.a.createElement("textarea",Object.assign({id:a.form+t.name},t)),r.a.createElement("p",{style:{color:"red"}},a.touched&&a.error))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.valid;return r.a.createElement("form",{onSubmit:t(this.onSubmit)},r.a.createElement(w.a,{component:this.renderTextField,name:"title",label:"Enter title",mandatory:!0}),r.a.createElement(w.a,{component:this.renderMemoField,name:"description",label:"Enter description",mandatory:!1}),r.a.createElement("button",{type:"submit",disabled:!a},"Submit"))}}]),t}(n.Component);var D=Object(k.a)({form:"streamForm",validate:function(e){var t={};return e.title||(t.title="Please fill title"),t}})(C),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.createStream(e)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{onSubmit:this.onSubmit}),r.a.createElement("p",null,r.a.createElement(E.a,{to:"/stream"},"Go to stream list ->")))}}]),t}(n.Component),I=Object(h.b)(null,{createStream:f.b})(F),x=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchStream)(e.match.params.id)}},{key:"render",value:function(){var e=this.props.stream;return e?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Stream show"),r.a.createElement("p",null,"Stream title: ",e.title),r.a.createElement("p",null,"Stream description: ",e.description),r.a.createElement(E.a,{to:"/stream"},"Go to stream list")):r.a.createElement("div",null,"...Loading")}}]),t}(n.Component),A=Object(h.b)(function(e,t){return{stream:e.streams[t.match.params.id]}},{fetchStream:f.h})(x),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.editStream(a.props.match.params.id,e)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.stream;if(e){var t=e.title,a=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Edit stream"),r.a.createElement(D,{initialValues:{title:t,description:a},onSubmit:this.onSubmit.bind(this)}),r.a.createElement("p",null,r.a.createElement(E.a,{to:"/stream"},"Go to stream list ->")))}return r.a.createElement("div",null,"...Loading")}}]),t}(n.Component),_=Object(h.b)(function(e,t){return{stream:e.streams[t.match.params.id]}},function(e,t){return{fetchStream:function(t){e(Object(f.h)(t))},editStream:function(){e(f.d.apply(void 0,arguments))}}})(M),N=a(3),G=a.n(N),T=a(12),U=a(63),L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).authStatusChange=function(e){e?a.props.signIn(a.auth.currentUser.get().getId()):a.props.signOut()},a.signIn=function(){var e=Object(T.a)(G.a.mark(function e(t){var n;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a.auth.signIn();case 4:n=e.sent,console.log("User signed in ",n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("GoogleAuth signIn error ",e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),a.signOut=function(){var e=Object(T.a)(G.a.mark(function e(t){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a.auth.signOut();case 4:console.log("User signed out."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("GoogleAuth signed out error ",e.t0);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.gapi&&window.gapi.load("client:auth2",function(){window.gapi.client.init({clientId:"356527932784-volcn5md0nd1eg5nc2hn30cd6a6oeclf.apps.googleusercontent.com",scope:"email"}).then(function(){e.auth=window.gapi.auth2.getAuthInstance(),e.auth.isSignedIn.listen(e.authStatusChange),e.authStatusChange(e.auth.isSignedIn.get())},function(){return console.log("GoogleAuth gapi.client.init error")})})}},{key:"render",value:function(){var e=this.props.isSignedIn;return null===e?"Auth is loading...":r.a.createElement(r.a.Fragment,null,e?r.a.createElement("a",{href:"/",onClick:this.signOut},"Sign out"):r.a.createElement("a",{href:"/",onClick:this.signIn},"Sign in"),r.a.createElement("div",null,"Google auth"))}}]),t}(n.Component),P=Object(h.b)(function(e,t){return{isSignedIn:e.auth.isSignedIn}},{signIn:U.a,signOut:U.b})(L);t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Router examples"),r.a.createElement(P,null),r.a.createElement(c.a,{exact:!0,routes:[{to:"/stream",title:"StreamList"},{to:"/stream/create",title:"StreamCreate"}]}),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/stream",exact:!0,component:O}),r.a.createElement(l.a,{path:"/stream/create",exact:!0,component:I}),r.a.createElement(l.a,{path:"/stream/edit/:id",exact:!0,component:_}),r.a.createElement(l.a,{path:"/stream/:id",exact:!0,component:A}),r.a.createElement(l.a,{path:"/stream/*"},r.a.createElement(i.a,null,"Stream not found"))))}}}]);
//# sourceMappingURL=4.14a3416b.chunk.js.map