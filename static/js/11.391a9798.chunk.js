(this["webpackJsonpreact-main"]=this["webpackJsonpreact-main"]||[]).push([[11],{225:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(285),r=(a.a.arrayInsert,a.a.arrayMove,a.a.arrayPop,a.a.arrayPush,a.a.arrayRemove,a.a.arrayRemoveAll,a.a.arrayShift,a.a.arraySplice,a.a.arraySwap,a.a.arrayUnshift,a.a.autofill,a.a.blur,a.a.change,a.a.clearAsyncError,a.a.clearFields,a.a.clearSubmit,a.a.clearSubmitErrors,a.a.destroy,a.a.focus,a.a.initialize,a.a.registerField,a.a.reset);a.a.resetSection,a.a.setSubmitFailed,a.a.setSubmitSucceeded,a.a.startAsyncValidation,a.a.startSubmit,a.a.stopAsyncValidation,a.a.stopSubmit,a.a.submit,a.a.touch,a.a.unregisterField,a.a.untouch,a.a.updateSyncWarnings,a.a.updateSyncErrors},229:function(e,t,n){"use strict";function a(e,t){return e===t}function r(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var a=t.length,r=0;r<a;r++)if(!e(t[r],n[r]))return!1;return!0}function c(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return i}));var u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];var u=0,i=a.pop(),l=c(a),o=e.apply(void 0,[function(){return u++,i.apply(null,arguments)}].concat(n)),s=e((function(){for(var e=[],t=l.length,n=0;n<t;n++)e.push(l[n].apply(null,arguments));return o.apply(null,e)}));return s.resultFunc=i,s.dependencies=l,s.recomputations=function(){return u},s.resetRecomputations=function(){return u=0},s}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=null,c=null;return function(){return r(t,n,arguments)||(c=e.apply(null,arguments)),n=arguments,c}}));function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((function(e,t,a){return e[n[a]]=t,e}),{})}))}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(229),r=Object(a.a)([function(e){return e.shopUser}],(function(e){return e.currentUser}))},235:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"j",(function(){return h}));var a=n(229),r=function(e){return e.shopCart},c=Object(a.a)([r],(function(e){return e.cartItems})),u=Object(a.a)([c],(function(e){return Object.values(e).reduce((function(e,t){return e+t.quantity}),0)})),i=Object(a.a)([r],(function(e){return e.visibleDropdown})),l=Object(a.a)([c],(function(e){return Object.values(e).reduce((function(e,t){return e+t.quantity*t.price}),0)})),o=(n(232),function(e){return e.streams}),s=Object(a.a)([o,function(e,t){return t}],(function(e,t){return e[t]})),m=function(e){return e.auth},f=Object(a.a)([m],(function(e){return e.isSignedIn})),d=Object(a.a)([m],(function(e){return e.userId})),p=function(e){return e.users},b=Object(a.a)([p],(function(e){return e.isLoadingUsers})),h=Object(a.a)([p],(function(e){return Object.values(e.users)}))},379:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),u=n(46),i=n(45),l=n(4),o=n.n(l),s=n(9),m=n(74),f=n(75),d=n(77),p=n(76),b=n(34),h=n(86),g=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).authStatusChange=function(t){t?e.props.signIn(e.auth.currentUser.get().getId()):e.props.signOut()},e.signIn=function(){var t=Object(s.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,e.auth.signIn();case 4:a=t.sent,console.log("User signed in ",a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("GoogleAuth signIn error ",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.signOut=function(){var t=Object(s.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,e.auth.signOut();case 4:console.log("User signed out."),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log("GoogleAuth signed out error ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi&&window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"356527932784-volcn5md0nd1eg5nc2hn30cd6a6oeclf.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.auth.isSignedIn.listen(e.authStatusChange),e.authStatusChange(e.auth.isSignedIn.get())}),(function(){return console.log("GoogleAuth gapi.client.init error")}))}))}},{key:"render",value:function(){var e=this.props.isSignedIn;return null===e?"Auth is loading...":r.a.createElement(r.a.Fragment,null,e?r.a.createElement("a",{href:"/",onClick:this.signOut},"Sign out"):r.a.createElement("a",{href:"/",onClick:this.signIn},"Sign in"),r.a.createElement("div",null,"Google auth"))}}]),n}(a.Component),E=Object(b.c)((function(e,t){return{isSignedIn:e.auth.isSignedIn}}),{signIn:h.a,signOut:h.b})(g),v=n(31),O=n(58),j=n(225),y=n(296),S=n(297),w=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).onSubmit=function(t){e.props.onSubmit(t),e.props.dispatch(Object(j.a)("streamCreate"))},e.renderTextField=function(e){var t=e.input,n=e.meta,a=e.label,c=e.mandatory;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:n.form+t.name},a,c&&r.a.createElement("sup",null,"*")),r.a.createElement("input",Object.assign({type:"text",autoComplete:"off",id:n.form+t.name},t)),r.a.createElement("p",{style:{color:"red"}},n.visited&&n.error))},e.renderMemoField=function(e){var t=e.input,n=e.meta,a=e.label,c=e.mandatory;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:n.form+t.name},a,c&&r.a.createElement("sup",null,"*")),r.a.createElement("textarea",Object.assign({id:n.form+t.name},t)),r.a.createElement("p",{style:{color:"red"}},n.touched&&n.error))},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.valid;return r.a.createElement("form",{onSubmit:t(this.onSubmit)},r.a.createElement(y.a,{component:this.renderTextField,name:"title",label:"Enter title",mandatory:!0}),r.a.createElement(y.a,{component:this.renderMemoField,name:"description",label:"Enter description",mandatory:!1}),r.a.createElement("button",{type:"submit",disabled:!n},"Submit"))}}]),n}(a.Component);var k=Object(S.a)({form:"streamForm",validate:function(e){var t={};return e.title||(t.title="Please fill title"),t}})(w),C=Object(a.memo)((function(){var e=Object(b.d)(),t=Object(a.useCallback)((function(t){return e(Object(O.b)(t))}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{onSubmit:t}),r.a.createElement("p",null,r.a.createElement(v.b,{to:"/stream"},"Go to stream list ->")))})),F=n(10),I=Object(a.memo)((function(e){var t=e.match,n=Object(b.d)(),c=Object(b.e)((function(e){return e.streams[t.params.id]}));Object(a.useEffect)((function(){var e=F.a.CancelToken.source();return n(Object(O.h)(t.params.id,e.token)),function(){e.cancel("Cancel fetchStream ".concat(t.params.id))}}),[n,t.params.id]);var u=Object(a.useCallback)((function(e){return n(Object(O.d)(t.params.id,e))}),[n,t.params.id]);if(c){var i=c.title,l=c.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Edit stream"),r.a.createElement(k,{initialValues:{title:i,description:l},onSubmit:u}),r.a.createElement("p",null,r.a.createElement(v.b,{to:"/stream"},"Go to stream list ->")))}return r.a.createElement("div",null,"...Loading")})),x=n(235),A=Object(a.memo)((function(e){var t=e.match,n=Object(b.d)(),c=Object(b.e)((function(e){return Object(x.i)(e,t.params.id)}));return Object(a.useEffect)((function(){n(Object(O.h)(t.params.id))}),[n,t]),c?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Stream show"),r.a.createElement("p",null,"Stream title:",c.title),r.a.createElement("p",null,"Stream description:",c.description),r.a.createElement(v.b,{to:"/stream"},"Go to stream list")):r.a.createElement("div",null,"...Loading")})),_=n(35),N=function(e){var t=e.title,n=e.description;return r.a.createElement("div",{className:"stream"},r.a.createElement("p",{className:"stream__title"},t),r.a.createElement("p",{className:"stream__description"},n))},U=Object(a.memo)((function(e){var t=e.stream,n=e.currentUserId,a=e.onDeleteClick,c=t.userId,u=t.id;if(c===n)return r.a.createElement("div",{className:"stream-list__controls"},r.a.createElement(v.b,{to:"/stream/edit/".concat(u)},"Edit"),r.a.createElement("button",{type:"button",onClick:a},"Delete"))})),D=n(42),G=n.n(D),L=(n(379),function(e){var t=e.title,n=e.controls;return G.a.createPortal(r.a.createElement("div",{className:"modal-portal"},r.a.createElement("div",{className:"modal-portal__inner"},r.a.createElement("p",null,t),r.a.createElement("div",{className:"modal-portal__controls"},n))),document.querySelector("#modal"))}),M=Object(a.memo)((function(){var e=Object(b.d)(),t=Object(b.e)(x.h),n=Object(b.e)(x.b),c=Object(a.useState)(null),u=Object(_.a)(c,2),i=u[0],l=u[1],o=Object(a.useCallback)((function(e){return function(){l(e)}}),[]),s=Object(a.useCallback)((function(){e(Object(O.c)(i.id)),l(null)}),[e,i]),m=Object(a.useCallback)((function(){l(null)}),[]),f=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:s},"Delete"),r.a.createElement("button",{type:"button",onClick:m},"Cancel"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"stream-list"},Object.entries(t).map((function(e){var t=Object(_.a)(e,2),a=t[0],c=t[1];return r.a.createElement("li",{key:a,className:"stream-list__item"},r.a.createElement(N,Object.assign({},c,{title:r.a.createElement(v.b,{to:"/stream/".concat(c.id)},c.title)})),r.a.createElement(U,{stream:c,currentUserId:n,onDeleteClick:o(c)}))}))),i&&r.a.createElement(L,{title:"Are u sure u wanna delete this stream?",controls:f}))})),P=Object(a.memo)((function(){var e=Object(b.d)(),t=Object(b.e)(x.a);return Object(a.useEffect)((function(){e(Object(O.i)())}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),t&&r.a.createElement("p",null,r.a.createElement(v.b,{to:"/stream/create"},"Create stream ->")))}));t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Router examples"),r.a.createElement(E,null),r.a.createElement(i.a,{exact:!0,routes:[{to:"/stream",title:"StreamList"},{to:"/stream/create",title:"StreamCreate"}]}),r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/stream",exact:!0,component:P}),r.a.createElement(c.b,{path:"/stream/create",exact:!0,component:C}),r.a.createElement(c.b,{path:"/stream/edit/:id",exact:!0,component:I}),r.a.createElement(c.b,{path:"/stream/:id",exact:!0,component:A}),r.a.createElement(c.b,{path:"/stream/*"},r.a.createElement(u.a,null,"Stream not found"))))}}}]);
//# sourceMappingURL=11.391a9798.chunk.js.map